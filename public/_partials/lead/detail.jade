//- _partials/lead/detail.jade

section.leadDetail(style="position:relative;")
  for lead in leads
    div(data-lead="#{lead.slug}")
      != partial("./detail.header", { lead: lead })
  
      section.tiles
        div
          != partial("../tile/personal", {title: "Personal Insights", target: "personal"})
          
          != partial("../tile/activity", {title: "Social Activity", target: "activity"})
          
          != partial("../tile/connection", {title: "Social Connections", target: "connection",lead: lead})
          
          != partial("../tile/trends", {title: "Social Trends", target: "trends"})
          
          != partial("../tile/products", {title: "Product Suggestions", target: "products"})
          
          != partial("../tile/employment", {title: "Employment", target: "employment"})
  
      != partial("../expanded/personal", {title: "Personal Insights", target: "personal"})
        
      != partial("../expanded/activity", {title: "Social Activity", target: "activity"})
        
      != partial("../expanded/connection", {title: "Social Connections", target: "connection",lead: lead})
        
      != partial("../expanded/trends", {title: "Social Trends", target: "trends"})
        
      != partial("../expanded/products", {title: "Product Suggestions", target: "products"})
        
      != partial("../expanded/employment", {title: "Employment", target: "employment"})

script.
  (function () {
    $(document).ready(function () {
      
      var tileList = $(".tile");
      
      $(tileList).click(function (e) {
        var target = $(this).attr('href').split('').slice(1).join('');
        var expandedTileList = $(this).parent().parent('section').siblings('.expanded');
        var expandedTile = $(expandedTileList).filter('[data-tile="' + target +'"]');

        $(expandedTileList).removeClass('active');
        $(expandedTile).addClass('active');
        $('body').addClass('show-tile-detail');
      });
    
      $(".expanded .fa-times-circle").click(function (e) {
        $('.expanded').removeClass('active');
        $('body').removeClass('show-tile-detail');
      });
    });
  })();